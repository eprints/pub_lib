<?xml version="1.0" ?>

<!-- 
	Full "abstract page" (or splash page or summary page, depending on your jargon) for an eprint. 
-->

<cite:citation xmlns="http://www.w3.org/1999/xhtml" xmlns:epc="http://eprints.org/ep3/control" xmlns:cite="http://eprints.org/ep3/citation" >

  <epc:if test="$flags{has_multiple_versions}">
    <div style="margin-bottom: 1em">
      <epc:print expr="$multi_info" />
    </div>
  </epc:if>

  <epc:set name='docs' expr='$item.documents()'>

    <epc:if test="length($docs) = 0">
      <epc:phrase ref="page:nofulltext" />
      <epc:if test="$item.contact_email().is_set() and eprint_status = 'archive'">
        (<a href="{$config{http_cgiurl}}/request_doc?eprintid={eprintid}"><epc:phrase ref="request:button" /></a>)
      </epc:if>
    </epc:if>
  
    <epc:if test="length($docs) gt 0">
      <epc:phrase ref="page:fulltext" />
      <table>
        <epc:foreach expr="$docs" iterator="doc">
          <tr>
            <td valign="top" align="right"><epc:print expr="$doc.icon('HoverPreview','noNewWindow')}" /></td>
            <td valign="top">
              <epc:print expr="$doc.citation('default')" /><br />
              <a href="{$doc.url()}" class="ep_document_link"><epc:phrase ref="summary_page:download"/> (<epc:print expr="$doc.doc_size().human_filesize()" />)</a>
              <epc:if test="$doc.is_public()">
			  <epc:choose>
			  <epc:when test="$doc.thumbnail_url('video_mp4').is_set()">
			  | <epc:print expr="$doc.preview_link(phrase('lib/document:preview'),'docs','video_mp4')" />
			  </epc:when>
			  <epc:when test="$doc.thumbnail_url('audio_mp4').is_set()">
			  | <epc:print expr="$doc.preview_link(phrase('lib/document:preview'),'docs','audio_mp4')" />
			  </epc:when>
			  <epc:when test="$doc.thumbnail_url('lightbox').is_set()">
			  | <epc:print expr="$doc.preview_link(phrase('lib/document:preview'),'docs','lightbox')" />
			  </epc:when>
			  </epc:choose>
			  </epc:if>
              <epc:if test="!$doc.is_public() and $item.contact_email().is_set() and eprint_status = 'archive'">
                | <a href="{$config{http_cgiurl}}/request_doc?docid={$doc{docid}"><epc:phrase ref="request:button" /></a>
              </epc:if>
  
              <ul>
              <epc:foreach expr="$doc.related_objects('http://eprints.org/relation/hasVersion')" iterator="rel">
                <epc:if test="$rel{relation_type}!='http://eprints.org/relation/isVolatileVersionOf'">
                  <li><epc:print expr="$rel.citation_link('default')" /></li>
                </epc:if>
              </epc:foreach>
              </ul>
            </td>
          </tr>
        </epc:foreach>
      </table>
    </epc:if>

  </epc:set>

</cite:citation>

